var l=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var w=(d,o)=>{for(var g in o)l(d,g,{get:o[g],enumerable:!0})},b=(d,o,g,p)=>{if(o&&typeof o=="object"||typeof o=="function")for(let u of y(o))!x.call(d,u)&&u!==g&&l(d,u,{get:()=>o[u],enumerable:!(p=h(o,u))||p.enumerable});return d};var v=d=>b(l({},"__esModule",{value:!0}),d);var k={};w(k,{make_fixture:()=>R});module.exports=v(k);var R={start_builder_chain:{for_data_type:(...d)=>({with_possible_tags:((...o)=>({data_can_be_transformed_into_such_views:g=>({build:p=>{let u=Date.now(),a=Object.entries(p).reduce((s,[_,{fixture:t,tags:i}])=>{let r=++u;s.id_fixture.set(r,t),s.name_tag_id.set(_,new Map(i.map(e=>[e,r]))),s.id_name.set(r,_),s.name_id.set(_,r);for(let e of i)(s.tag_name_id.get(e)||s.tag_name_id.set(e,new Map).get(e)).set(_,r);return s},{id_fixture:new Map,name_id:new Map,id_name:new Map,name_tag_id:new Map,tag_name_id:new Map}),c=s=>({add_to_more_tags:(..._)=>_.forEach(t=>{let i=a.name_id.get(s);(a.name_tag_id.get(s)||a.name_tag_id.set(s,new Map).get(s)).set(t,i),(a.tag_name_id.get(t)||a.tag_name_id.set(t,new Map).get(t)).set(s,i)}),remove_from_tags:(..._)=>_.forEach(t=>{a.name_tag_id.get(s).delete(t),a.tag_name_id.get(t).delete(s)}),update_data_source:_=>{let t=a.name_id.get(s),i=a.id_fixture.get(t),r=_(i);a.id_fixture.set(t,r)},as:Object.entries(g).reduce((_,[t,i])=>(_[t]=(...r)=>()=>{let e=a.name_id.get(s);return i(a.id_fixture.get(e),...r)},_),{})});return{one_by_name:c,many_with_tags:(...s)=>({to_array_of_fixtures:()=>{var t;let _=[];for(let i of s){let r=((t=a.tag_name_id.get(i))==null?void 0:t.values().map(e=>e))||[];_.push(new Set(r))}if(_.length){let i=_.reduce((e,n)=>e.intersection(n)),r=[];return i.values().toArray().forEach(e=>{let n=a.id_name.get(e);if(n){let f=c(n);r.push(f)}}),r}else return[]},as:Object.entries(g).reduce((_,[t,i])=>(_[t]=()=>(...r)=>{var n;let e=[];for(let f of s){let m=((n=a.tag_name_id.get(f))==null?void 0:n.values().map(T=>T))||[];e.push(new Set(m))}return e.length?e.reduce((m,T)=>m.intersection(T)).values().map(m=>i(a.id_fixture.get(m),...r)).toArray():[]},_),{}),foreach_update_data_source:_=>{var i;let t=[];for(let r of s){let e=((i=a.tag_name_id.get(r))==null?void 0:i.values().map(n=>n))||[];t.push(new Set(e))}t.length&&t.reduce((e,n)=>e.intersection(n)).values().forEach(e=>{let n=a.id_fixture.get(e);a.id_fixture.set(e,_(n))})}})}}})}))})}};0&&(module.exports={make_fixture});
//# sourceMappingURL=make_fixture.js.map