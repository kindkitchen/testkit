var p=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var c=(o,n)=>{for(var d in n)p(o,d,{get:n[d],enumerable:!0})},x=(o,n,d,T)=>{if(n&&typeof n=="object"||typeof n=="function")for(let g of y(n))!h.call(o,g)&&g!==d&&p(o,g,{get:()=>n[g],enumerable:!(T=l(n,g))||T.enumerable});return o};var w=o=>x(p({},"__esModule",{value:!0}),o);var R={};c(R,{make_fixture:()=>b});module.exports=w(R);var b={start_builder_chain:{for_data_type:(...o)=>({with_possible_tags:((...n)=>({data_can_be_transformed_into_such_views:d=>({build:T=>{let g=Date.now(),s=Object.entries(T).reduce((t,[e,{fixture:_,tags:a}])=>{let r=++g;t.id_fixture.set(r,_),t.name_tag_id.set(e,new Map(a.map(i=>[i,r]))),t.id_name.set(r,e),t.name_id.set(e,r);for(let i of a)(t.tag_name_id.get(i)||t.tag_name_id.set(i,new Map).get(i)).set(e,r);return t},{id_fixture:new Map,name_id:new Map,id_name:new Map,name_tag_id:new Map,tag_name_id:new Map}),u=t=>({add_to_more_tags:(...e)=>e.forEach(_=>{let a=s.name_id.get(t);(s.name_tag_id.get(t)||s.name_tag_id.set(t,new Map).get(t)).set(_,a),(s.tag_name_id.get(_)||s.tag_name_id.set(_,new Map).get(_)).set(t,a)}),remove_from_tags:(...e)=>e.forEach(_=>{s.name_tag_id.get(t).delete(_),s.tag_name_id.get(_).delete(t)}),update_data_source:e=>{let _=s.name_id.get(t),a=s.id_fixture.get(_),r=e(a);s.id_fixture.set(_,r)},as:Object.entries(d).reduce((e,[_,a])=>(e[_]=(...r)=>()=>{let i=s.name_id.get(t);return a(s.id_fixture.get(i),...r)},e),{})});return{one_by_name:u,many_with_tags:(...t)=>({to_array_of_fixtures:()=>{var _;let e=[];for(let a of t){let r=((_=s.tag_name_id.get(a))==null?void 0:_.values().map(i=>i))||[];e.push(new Set(r))}if(e.length){let a=e.reduce((i,m)=>i.intersection(m)),r=[];return a.values().toArray().forEach(i=>{let m=s.id_name.get(i);if(m){let f=u(m);r.push(f)}}),r}else return[]},as:Object.entries(d).reduce((e,[_,a])=>(e[_]=()=>(...r)=>(s.tag_name_id.get(t[0])||[]).values().toArray().map(m=>a(s.id_fixture.get(m),...r)),e),{}),foreach_update_data_source:e=>{(s.tag_name_id.get(t[0])||new Map).entries().toArray().forEach(([_,a])=>{let r=s.id_fixture.get(a);s.id_fixture.set(a,e(r))})}})}}})}))})}};0&&(module.exports={make_fixture});
//# sourceMappingURL=make_fixture.js.map